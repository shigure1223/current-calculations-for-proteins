
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1. DEPRECATED, applies to CURP v1.1 &#8212; CURP 1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../">CURP 1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1. </span>DEPRECATED, applies to CURP v1.1</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="deprecated-applies-to-curp-v1-1">
<h1><span class="section-number">1. </span>DEPRECATED, applies to CURP v1.1<a class="headerlink" href="#deprecated-applies-to-curp-v1-1" title="Permalink to this headline">¶</a></h1>
<p>このページでは、開発者のためのインストールの手順を紹介する.
以下ではLinuxとMacでのインストール手順を述べる.</p>
<p>安定板だけを試したい方は <a class="reference external" href="./install">こちら</a>.</p>
<section id="install-on-mac">
<h2><span class="section-number">1.1. </span>Install on Mac<a class="headerlink" href="#install-on-mac" title="Permalink to this headline">¶</a></h2>
<p>Macはバージョン毎にアプリケーションの揃え方が異なるので注意すること。
ちなみに、各バージョンの名前は次のように使う。</p>
<ul class="simple">
<li><p>Mac OS X 10.6.x (Snow Leopard) ⇒ SLeopard</p></li>
<li><p>Mac OS X 10.7.x (Lion) ⇒ Lion</p></li>
<li><p>OS X 10.8.x (Mountain Lion) ⇒ MLion</p></li>
</ul>
<p>また、MacでCurpを動かすために必要となるアプリケーションは次の通り：</p>
<ul class="simple">
<li><p>Xcode Command Line Tools &gt;= 4.5.4</p></li>
<li><p>Python ≧2.7.3</p></li>
<li><p>OpenMPI ≧1.4.3</p></li>
<li><p>gfortran ≧</p></li>
<li><p>Mercurial ≧2.2.3</p></li>
</ul>
<p>出来るだけ最新のバージョンを揃えておいた方が良い.</p>
<section id="install-xcode">
<h3><span class="section-number">1.1.1. </span>Install Xcode<a class="headerlink" href="#install-xcode" title="Permalink to this headline">¶</a></h3>
<p>Mac上での開発環境(gcc等)を整えるためにXcodeをインストールする必要がある。
SLeopardではXcodeをインストールすれば、自動的にCommand Line Toolsも
インストールされる。LionとMLionではComman Line ToolsはXcodeの標準ライブラリとは別になっているので、別途インストールする必要がある。</p>
<p>Xcodeを立ち上げてから、メニューで、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Xcode</span> <span class="o">&gt;</span> <span class="n">Preference</span> <span class="o">&gt;</span> <span class="n">Downloads</span> <span class="o">&gt;</span> <span class="n">Components</span>
</pre></div>
</div>
<p>で Command Line Toolsをインストール出来る。</p>
</section>
<section id="install-python">
<h3><span class="section-number">1.1.2. </span>Install Python<a class="headerlink" href="#install-python" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Download Python</p>
<p>以下からPython-2.7.xの最新バージョンをダウンロードする:</p>
<p><a class="reference external" href="http://www.python.org/download/">http://www.python.org/download/</a></p>
<p>の「Python 2.7.5 Mac OS X 64-bit/32-bit x86-64/i386 Installer」
を選ぶこと。</p>
</li>
<li><p>Install Python</p>
<p>ダウンロードしたdmgファイルをダブルクリックして、
他のアプリケーションと同じようにインストールすれば良い。</p>
</li>
</ol>
</section>
<section id="install-openmpi">
<h3><span class="section-number">1.1.3. </span>Install OpenMPI<a class="headerlink" href="#install-openmpi" title="Permalink to this headline">¶</a></h3>
<p>SLeopardまではOpenMPIが標準でインストールされていた。
しかし、LionとMLionではOpenMPIはインストールされていないので、
自分でインストールしなければならない。
SLeopardでは以下の作業は必要無い。</p>
<ol class="arabic">
<li><p>以下のサイトからOpenMPIをインストールする。</p>
<p><a class="reference external" href="http://www.open-mpi.org/software/ompi/v1.6/">http://www.open-mpi.org/software/ompi/v1.6/</a></p>
<p>のopenmpi-1.6.tar.gz をダウンロードする。
最新版があればそれを使うことにする。
以降、バージョン番号は最新のものに読み替えること。</p>
</li>
<li><p>openmpiのソースコードをダウンロードしたディレクトリに移動して、
次のようにコマンドを実行する:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar xzvf openmpi-1.6.tar.gz
$ cd openmpi-1.6
$ ./configure --prefix=&lt;directory_path_to_want_to_install&gt;
$ make
$ make install
</pre></div>
</div>
</li>
<li><p>環境変数を設定する。</p>
<p>bashrcに以下の設定を追加する:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>OPENMPI_PATH=&lt;installed_directory_path&gt;
export PATH=$OPENMPI_PATH/bin:$PATH
export LD_LIBRARY_PATH=$OPENMPI_PATH/lib:$LD_LIBRARY_PATH
export DYLD_LIBRARY_PATH=$OPENMPI_PATH/lib:$DYLD_LIBRARY_PATH
export MANPATH=$OPENMPI_PATH/share/man:$OPENMPI_PATH
</pre></div>
</div>
</li>
</ol>
</section>
<section id="install-gfortran">
<h3><span class="section-number">1.1.4. </span>Install GFortran<a class="headerlink" href="#install-gfortran" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>gfortranを以下のURLからダウンロードする。
64bit版を選ぶこと。</p>
<p><a class="reference external" href="http://gcc.gnu.org/wiki/GFortranBinaries">http://gcc.gnu.org/wiki/GFortranBinaries</a></p>
</li>
<li><p>gfortranを解凍して、任意の場所に配置する。</p>
<p>例：&lt;DIRPATH_TO_GFORTRAN&gt;</p>
</li>
<li><p>gfortranを使うための環境変数を設定する。</p>
<p>/usr/local等に配置した場合には、この手順は必要無い。
二つの環境変数を~/.bashrc等に追記する:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GFORTRAN_PATH=&lt;DIRPATH_TO_GFORTRAN&gt;
export PATH=$GFORTRAN_PATH/bin:$PATH
export LD_LIBRARY_PATH=$GFORTRAN_PATH/lib:$LD_LIBRARY_PATH
export DYLD_LIBRARY_PATH=$GFORTRAN_PATH/lib:$DYLD_LIBRARY_PATH
</pre></div>
</div>
</li>
</ol>
</section>
<section id="install-mercurial">
<h3><span class="section-number">1.1.5. </span>Install Mercurial<a class="headerlink" href="#install-mercurial" title="Permalink to this headline">¶</a></h3>
<p>次のサイトからダウンロードしてインストールする．</p>
<p><a class="reference external" href="http://mercurial.selenic.com/">http://mercurial.selenic.com/</a></p>
</section>
<section id="install-curp">
<h3><span class="section-number">1.1.6. </span>Install CURP<a class="headerlink" href="#install-curp" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>ターミナル上で、Curpを置きたいディレクトリを作成して移動する。
仮にインストールしたい場所を~/programs/curpにしたいのであれば、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/programs/curp
$ cd ~/programs/curp
</pre></div>
</div>
</li>
<li><p>curpのcloneをダウンロードする。</p>
<ol class="arabic simple">
<li><p>で mkdir を行ったディレクトリで、次のようにコマンドを打つ。</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ hg clone ssh://hg@bitbucket.org/takayamato/curp/wiki &lt;1. で作ったディレクトリ&gt;
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>CURP_HOMEを$HOME/.bashrc等に追記する。</p>
<p>例：export CURP_HOME=$HOME/opt/curp</p>
</li>
<li><p>CURPを構築する。</p>
<p>次のようにする。少々時間が掛かる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CURP_HOME
$ make
</pre></div>
</div>
<p>CURPにはvirtualenvによるPython環境が必要であるが、
これはPython環境の構築からCURPライブラリのビルドまでを全て行っている。</p>
<p>ここで、 <cite>make</cite> に他のターゲットを与えることが出来る。</p>
<p>fortranライブラリのコンパイルに使われるものはデフォルトではgfortranである。
<code class="docutils literal notranslate"><span class="pre">intel</span></code> を指定するとifortが使われる:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make intel
</pre></div>
</div>
<p>また、並列計算バージョンを使いたくない時には、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$make serial
</pre></div>
</div>
<p>とすれば、pythonのmpiライブラリをビルドしない。</p>
<p>環境を全て真っ新にしたい場合には、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make clean
</pre></div>
</div>
<p>とすれば良い。</p>
</li>
</ol>
<ol class="arabic" start="6">
<li><p>(オプション)CURPのAPIドキュメントをビルドする。</p>
<p>CURPの技術仕様ドキュメントを自動生成することが出来る:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CURP_HOME
$ make apihtml

   # ここで、生成が完了する。

$ cd $CURP_HOME/docs/_api/
$ open index.html
</pre></div>
</div>
<p>PDFファイルも生成することが出来る:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CURP_HOME
$ make apipdf

   # ここで、生成が完了する。

$ cd $CURP_HOME/docs/_api/
$ open api.pdf
</pre></div>
</div>
<p>ただし、pdfを生成する場合にはさらにLaTeXが必要なので、
インストールされていることを確認しておくこと。</p>
</li>
<li><p>最新のcurpを取得する。</p>
<p>curpのディレクトリに移動して、次のようにコマンドを打つ:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ hg pull # BitBucketサーバからソースの最新版の履歴を取得。
(パスワードを聞かれる)
$ hg update # 履歴の最新版のファイルにアップデートする。
</pre></div>
</div>
<p>もし, SSHの公開鍵を自分のアカウントに追加している場合にはパスワードを
聞かれることはない．</p>
</li>
</ol>
<p>以上の作業によって、最新のCurpを使うことが出来るようになる。
4.と5.で行った、Python環境の構築とfortranライブラリのビルドは基本的には
必要無い。
ただし、fortranライブラリが変更されている場合には、再ビルドを行うこと。</p>
</section>
</section>
<section id="try-to-run">
<h2><span class="section-number">1.2. </span>Try to run<a class="headerlink" href="#try-to-run" title="Permalink to this headline">¶</a></h2>
<p>現時点では次のように実行する:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ $CURP_HOME/buildout/bin/curp-python $CURP_HOME/src/curp.py &lt;input_file&gt; &gt; log
</pre></div>
</div>
<p>いくつかの例が$CURP_HOME/exampleにあるので、run.shを実行して試してみると良い。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">1. DEPRECATED, applies to CURP v1.1</a><ul>
<li><a class="reference internal" href="#install-on-mac">1.1. Install on Mac</a><ul>
<li><a class="reference internal" href="#install-xcode">1.1.1. Install Xcode</a></li>
<li><a class="reference internal" href="#install-python">1.1.2. Install Python</a></li>
<li><a class="reference internal" href="#install-openmpi">1.1.3. Install OpenMPI</a></li>
<li><a class="reference internal" href="#install-gfortran">1.1.4. Install GFortran</a></li>
<li><a class="reference internal" href="#install-mercurial">1.1.5. Install Mercurial</a></li>
<li><a class="reference internal" href="#install-curp">1.1.6. Install CURP</a></li>
</ul>
</li>
<li><a class="reference internal" href="#try-to-run">1.2. Try to run</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/developer/install.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../">CURP 1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1. </span>DEPRECATED, applies to CURP v1.1</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2022, Yamato Labaratory.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>